{
  "hash": "9abb43bf50b9c1f37eb80ddcdcdfc0eb",
  "result": {
    "markdown": "---\ntitle: \"Concept of Tidy Data, Vectors & Pivoting\"\nsubtitle: \"CVEN 5837 - Summer 2022\"\nauthor: \"Lars SchÃ¶bitz\"\nformat: \n  revealjs: \n    theme: slides.scss\n    transition: fade\n    slide-number: true\n    logo: img/logo.png\n    footer: \"https://cven5837-ss22.github.io/website/\"\neditor: source\nexecute:\n  freeze: auto\nparams:\n    week: 4\n---\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](lec-04-tidy-data_files/figure-revealjs/unnamed-chunk-4-1.png){width=960}\n:::\n:::\n\n::: {.cell}\n\n:::\n\n\n::: {.cell}\n\n:::\n\n## Learning Objectives (for this week)\n\n::: {.cell}\n\n:::\n\n1. Learners can apply functions from the dplyr R Package to transform their data from a wide to a long format and vice versa\n2. Learners can list the four main atomic vector types in R\n3. Learners can explain the three characteristics of tidy data\n\n# Part 1: Data types and vectors {background-color=\"#0F4C81\"}\n\n## Why care about data types?\n\n<div style=\"width:75%;height:0;padding-bottom:83%;position:relative;\"><iframe src=\"https://giphy.com/embed/SvRuvlSEa67wNNHuHy\" width=\"75%\" height=\"75%\" style=\"position:absolute\" frameBorder=\"0\" class=\"giphy-embed\" allowFullScreen></iframe></div><p><a href=\"https://giphy.com/gifs/Friends-episode-20-friends-tv-the-one-with-baby-shower-SvRuvlSEa67wNNHuHy\">via GIPHY</a></p>\n\n## Example: survey data {.smaller .scrollable}\n\n::: {.cell}\n::: {.cell-output-display}\n| id|job      |price_glass                                   |\n|--:|:--------|:---------------------------------------------|\n|  1|Student  |0                                             |\n|  2|Retired  |0                                             |\n|  3|Other    |0                                             |\n|  4|Employed |10                                            |\n|  5|Employed |See comment                                   |\n|  6|Student  |05-Oct                                        |\n|  7|Student  |0                                             |\n|  8|Retired  |0                                             |\n|  9|Student  |10                                            |\n| 10|Employed |0                                             |\n| 11|Employed |20 (2chf per person with 10 people in the WG) |\n| 12|Student  |10                                            |\n| 13|Student  |10                                            |\n| 14|Employed |0                                             |\n| 15|Student  |10                                            |\n| 16|Student  |0                                             |\n| 17|Employed |5 to 10                                       |\n| 18|Other    |0                                             |\n| 19|Student  |0                                             |\n| 20|Employed |10                                            |\n| 21|Employed |0                                             |\n| 22|Employed |5                                             |\n:::\n:::\n\n## Oh why won't you work?! {.smaller}\n\n::: {.cell}\n\n```{.r .cell-code}\nsurvey_data_small |> \n  summarise(mean_price_glass = mean(price_glass))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 Ã— 1\n  mean_price_glass\n             <dbl>\n1               NA\n```\n:::\n:::\n\n## Oh why won't you still work??!! {.smaller}\n\n::: {.cell}\n\n```{.r .cell-code}\nsurvey_data_small |> \n  summarise(mean_price_glass = mean(price_glass, na.rm = TRUE))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 Ã— 1\n  mean_price_glass\n             <dbl>\n1               NA\n```\n:::\n:::\n\n## Take a breath and look at your data {.smaller}\n\n\n::: {.cell}\n::: {.cell-output-display}\n| id|job      |price_glass                                   |\n|--:|:--------|:---------------------------------------------|\n|  1|Student  |0                                             |\n|  2|Retired  |0                                             |\n|  3|Other    |0                                             |\n|  4|Employed |10                                            |\n|  5|Employed |See comment                                   |\n|  6|Student  |05-Oct                                        |\n|  7|Student  |0                                             |\n|  8|Retired  |0                                             |\n|  9|Student  |10                                            |\n| 10|Employed |0                                             |\n| 11|Employed |20 (2chf per person with 10 people in the WG) |\n| 12|Student  |10                                            |\n| 13|Student  |10                                            |\n| 14|Employed |0                                             |\n| 15|Student  |10                                            |\n| 16|Student  |0                                             |\n| 17|Employed |5 to 10                                       |\n| 18|Other    |0                                             |\n| 19|Student  |0                                             |\n| 20|Employed |10                                            |\n| 21|Employed |0                                             |\n| 22|Employed |5                                             |\n:::\n:::\n\n## Very common data tidying step! {.smaller}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"|2|3,4|5,6|7\"}\nsurvey_data_small |> \n  mutate(price_glass_new = case_when(\n    price_glass == \"5 to 10\" ~ \"7.5\",\n    price_glass == \"05-Oct\" ~ \"7.5\",\n    str_detect(price_glass, pattern = \"20\") == TRUE ~ \"20\",\n    str_detect(price_glass, pattern = \"See comment\") == TRUE ~ NA_character_,\n    TRUE ~ price_glass\n  )) \n```\n:::\n\n## Very common data tidying step! {.scrollable .smaller}\n\n::: {.cell}\n::: {.cell-output-display}\n| id|job      |price_glass_new |price_glass                                   |\n|--:|:--------|:---------------|:---------------------------------------------|\n|  1|Student  |0               |0                                             |\n|  2|Retired  |0               |0                                             |\n|  3|Other    |0               |0                                             |\n|  4|Employed |10              |10                                            |\n|  5|Employed |NA              |See comment                                   |\n|  6|Student  |7.5             |05-Oct                                        |\n|  7|Student  |0               |0                                             |\n|  8|Retired  |0               |0                                             |\n|  9|Student  |10              |10                                            |\n| 10|Employed |0               |0                                             |\n| 11|Employed |20              |20 (2chf per person with 10 people in the WG) |\n| 12|Student  |10              |10                                            |\n| 13|Student  |10              |10                                            |\n| 14|Employed |0               |0                                             |\n| 15|Student  |10              |10                                            |\n| 16|Student  |0               |0                                             |\n| 17|Employed |7.5             |5 to 10                                       |\n| 18|Other    |0               |0                                             |\n| 19|Student  |0               |0                                             |\n| 20|Employed |10              |10                                            |\n| 21|Employed |0               |0                                             |\n| 22|Employed |5               |5                                             |\n:::\n:::\n\n## Sumamrise? Argh!!!!  {auto-animate=\"true\" .smaller}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"9\"}\nsurvey_data_small |> \n  mutate(price_glass_new = case_when(\n    price_glass == \"5 to 10\" ~ \"7.5\",\n    price_glass == \"05-Oct\" ~ \"7.5\",\n    str_detect(price_glass, pattern = \"20\") == TRUE ~ \"20\",\n    str_detect(price_glass, pattern = \"See comment\") == TRUE ~ NA_character_,\n    TRUE ~ price_glass\n  )) |> \n  summarise(mean_price_glass = mean(price_glass_new, na.rm = TRUE))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 Ã— 1\n  mean_price_glass\n             <dbl>\n1               NA\n```\n:::\n:::\n\n## Always respect your data types!  {auto-animate=\"true\" .smaller}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"9|10\"}\nsurvey_data_small |> \n  mutate(price_glass_new = case_when(\n    price_glass == \"5 to 10\" ~ \"7.5\",\n    price_glass == \"05-Oct\" ~ \"7.5\",\n    str_detect(price_glass, pattern = \"20\") == TRUE ~ \"20\",\n    str_detect(price_glass, pattern = \"See comment\") == TRUE ~ NA_character_,\n    TRUE ~ price_glass\n  )) |> \n  mutate(price_glass_new = as.numeric(price_glass_new)) |> \n  summarise(mean_price_glass = mean(price_glass_new, na.rm = TRUE))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 Ã— 1\n  mean_price_glass\n             <dbl>\n1             4.76\n```\n:::\n:::\n\n# Live Coding Exercise: Vectors {background-color=\"#0F4C81\"}\n\n## live-04a-vectors\n\n1. Head over to rstudio.cloud\n2. Open the workspace for the course (cven5837-ss22)\n3. Open \"Projects\"\n4. Open the \"course-materials\" project\n5. Follow along with me\n\n# Break One\n\n![](img/lec-01/coffee-break.jpg)\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div class=\"countdown\" id=\"timer_62dfbacb\" style=\"right:0;bottom:0;left:0;margin:5%;padding:10px;font-size:2em;\" data-warnwhen=\"0\">\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">10</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n:::\n:::\n\n::: aside\nPhoto by [Blake Wisz](https://unsplash.com/@blakewisz)\n:::\n\n# Part 2: tidyr - long and wide formats {background-color=\"#0F4C81\"}\n\n## . {background-image=\"img/lec-04/tidydata_1.jpg\" background-size=\"contain\"}\n\n\n::: aside\nIllustrations from the [Openscapes](https://www.openscapes.org/) blog [Tidy Data for reproducibility, efficiency, and collaboration](https://www.openscapes.org/blog/2020/10/12/tidy-data/) by [Julia Lowndes](https://twitter.com/juliesquid) and [Allison Horst](https://twitter.com/allison_horst)\n:::\n\n## . {background-image=\"img/lec-04/tidydata_2.jpg\" background-size=\"contain\"}\n\n::: aside\nIllustrations from the [Openscapes](https://www.openscapes.org/) blog [Tidy Data for reproducibility, efficiency, and collaboration](https://www.openscapes.org/blog/2020/10/12/tidy-data/) by [Julia Lowndes](https://twitter.com/juliesquid) and [Allison Horst](https://twitter.com/allison_horst)\n:::\n\n## . {background-image=\"img/lec-04/tidydata_3.jpg\" background-size=\"contain\"}\n\n::: aside\nIllustrations from the [Openscapes](https://www.openscapes.org/) blog [Tidy Data for reproducibility, efficiency, and collaboration](https://www.openscapes.org/blog/2020/10/12/tidy-data/) by [Julia Lowndes](https://twitter.com/juliesquid) and [Allison Horst](https://twitter.com/allison_horst)\n:::\n\n## A grammar of data tidying {.smaller}\n\n:::: {.columns}\n\n::: {.column width=\"40%\"}\n\n::: {.cell caption='tidyr is part of the tidyverse'}\n::: {.cell-output-display}\n![](img/lec-04/tidyr-part-of-tidyverse.png){width=60%}\n:::\n:::\n\n:::\n\n::: {.column width=\"60%\"}\n\nThe goal of tidyr is to help you tidy your data via\n\n- pivoting for going between wide and long data\n- splitting and combining character columns\n- nesting and unnesting columns\n- clarifying how `NA`s should be treated\n:::\n\n::::\n\n::: aside\nSlide taken from [Data Science in a Box](https://datasciencebox.org/)\n:::\n\n## Pivoting data\n\n::: {.cell}\n::: {.cell-output-display}\n![](img/lec-04/tidyr-longer-wider.gif){width=45% style=\"background-color: #FDF6E3\"}\n:::\n:::\n\n## Waste characterisation data {.smaller}\n\n::: {.cell}\n::: {.cell-output-display}\n|objid |location |  pet| metal_alu| glass| paper| recyclable| non_recyclable| total|\n|:-----|:--------|----:|---------:|-----:|-----:|----------:|--------------:|-----:|\n|900   |eth      | 0.06|      0.06|  0.58|  0.21|       0.92|           1.14|  2.05|\n|899   |eth      | 0.14|      0.01|  0.18|  0.28|       0.61|           3.04|  3.64|\n|921   |old_town | 0.00|      0.00|  0.00|  0.41|       0.41|           1.57|  1.99|\n|916   |old_town | 0.17|      0.04|  0.80|  0.55|       1.56|           0.62|  2.19|\n|900   |eth      | 0.10|      0.04|  0.00|  0.40|       0.54|           0.58|  1.12|\n|899   |eth      | 0.08|      0.03|  0.00|  0.05|       0.16|           0.34|  0.50|\n|921   |old_town | 0.08|      0.03|  0.30|  0.40|       0.81|           1.52|  2.33|\n|916   |old_town | 0.11|      0.04|  0.92|  1.01|       2.08|           1.99|  4.07|\n:::\n:::\n\n\n## How would you plot this?\n\n::: {.cell}\n::: {.cell-output-display}\n![](lec-04-tidy-data_files/figure-revealjs/unnamed-chunk-34-1.png){width=960}\n:::\n:::\n\n## And this?\n\n::: {.cell}\n::: {.cell-output-display}\n![](lec-04-tidy-data_files/figure-revealjs/unnamed-chunk-36-1.png){width=960}\n:::\n:::\n\n## You need: A long format {.smaller .scrollable}\n\n::: {.cell}\n::: {.cell-output-display}\n|objid |location |waste_category | weight|\n|:-----|:--------|:--------------|------:|\n|900   |eth      |pet            |   0.06|\n|900   |eth      |metal_alu      |   0.06|\n|900   |eth      |glass          |   0.58|\n|900   |eth      |paper          |   0.21|\n|900   |eth      |other          |   1.14|\n|899   |eth      |pet            |   0.14|\n|899   |eth      |metal_alu      |   0.01|\n|899   |eth      |glass          |   0.18|\n|899   |eth      |paper          |   0.28|\n|899   |eth      |other          |   3.04|\n|921   |old_town |pet            |   0.00|\n|921   |old_town |metal_alu      |   0.00|\n|921   |old_town |glass          |   0.00|\n|921   |old_town |paper          |   0.41|\n|921   |old_town |other          |   1.57|\n|916   |old_town |pet            |   0.17|\n|916   |old_town |metal_alu      |   0.04|\n|916   |old_town |glass          |   0.80|\n|916   |old_town |paper          |   0.55|\n|916   |old_town |other          |   0.62|\n|900   |eth      |pet            |   0.10|\n|900   |eth      |metal_alu      |   0.04|\n|900   |eth      |glass          |   0.00|\n|900   |eth      |paper          |   0.40|\n|900   |eth      |other          |   0.58|\n|899   |eth      |pet            |   0.08|\n|899   |eth      |metal_alu      |   0.03|\n|899   |eth      |glass          |   0.00|\n|899   |eth      |paper          |   0.05|\n|899   |eth      |other          |   0.34|\n|921   |old_town |pet            |   0.08|\n|921   |old_town |metal_alu      |   0.03|\n|921   |old_town |glass          |   0.30|\n|921   |old_town |paper          |   0.40|\n|921   |old_town |other          |   1.52|\n|916   |old_town |pet            |   0.11|\n|916   |old_town |metal_alu      |   0.04|\n|916   |old_town |glass          |   0.92|\n|916   |old_town |paper          |   1.01|\n|916   |old_town |other          |   1.99|\n:::\n:::\n\n## Reminder: The wide format {.smaller .scrollable}\n\n::: {.cell}\n::: {.cell-output-display}\n|objid |location |  pet| metal_alu| glass| paper| recyclable| non_recyclable| total|\n|:-----|:--------|----:|---------:|-----:|-----:|----------:|--------------:|-----:|\n|900   |eth      | 0.06|      0.06|  0.58|  0.21|       0.92|           1.14|  2.05|\n|899   |eth      | 0.14|      0.01|  0.18|  0.28|       0.61|           3.04|  3.64|\n|921   |old_town | 0.00|      0.00|  0.00|  0.41|       0.41|           1.57|  1.99|\n|916   |old_town | 0.17|      0.04|  0.80|  0.55|       1.56|           0.62|  2.19|\n|900   |eth      | 0.10|      0.04|  0.00|  0.40|       0.54|           0.58|  1.12|\n|899   |eth      | 0.08|      0.03|  0.00|  0.05|       0.16|           0.34|  0.50|\n|921   |old_town | 0.08|      0.03|  0.30|  0.40|       0.81|           1.52|  2.33|\n|916   |old_town | 0.11|      0.04|  0.92|  1.01|       2.08|           1.99|  4.07|\n:::\n:::\n\n## Or this?\n\n::: {.cell}\n::: {.cell-output-display}\n![](lec-04-tidy-data_files/figure-revealjs/unnamed-chunk-42-1.png){width=960}\n:::\n:::\n\n## Calculate percentages {.smaller .scrollable}\n\n::: {.cell}\n::: {.cell-output-display}\n|objid |location |waste_category |type           | weight| percent|\n|:-----|:--------|:--------------|:--------------|------:|-------:|\n|900   |eth      |pet            |recyclable     |   0.06|    2.02|\n|900   |eth      |metal_alu      |recyclable     |   0.06|    1.95|\n|900   |eth      |glass          |recyclable     |   0.58|   18.14|\n|900   |eth      |paper          |recyclable     |   0.21|    6.74|\n|900   |eth      |other          |non_recyclable |   1.14|   35.78|\n|899   |eth      |pet            |recyclable     |   0.14|    3.33|\n|899   |eth      |metal_alu      |recyclable     |   0.01|    0.31|\n|899   |eth      |glass          |recyclable     |   0.18|    4.30|\n|899   |eth      |paper          |recyclable     |   0.28|    6.69|\n|899   |eth      |other          |non_recyclable |   3.04|   73.36|\n|921   |old_town |pet            |recyclable     |   0.00|    0.00|\n|921   |old_town |metal_alu      |recyclable     |   0.00|    0.00|\n|921   |old_town |glass          |recyclable     |   0.00|    0.00|\n|921   |old_town |paper          |recyclable     |   0.41|    9.60|\n|921   |old_town |other          |non_recyclable |   1.57|   36.46|\n|916   |old_town |pet            |recyclable     |   0.17|    2.76|\n|916   |old_town |metal_alu      |recyclable     |   0.04|    0.69|\n|916   |old_town |glass          |recyclable     |   0.80|   12.73|\n|916   |old_town |paper          |recyclable     |   0.55|    8.82|\n|916   |old_town |other          |non_recyclable |   0.62|    9.99|\n|900   |eth      |pet            |recyclable     |   0.10|    3.09|\n|900   |eth      |metal_alu      |recyclable     |   0.04|    1.35|\n|900   |eth      |glass          |recyclable     |   0.00|    0.00|\n|900   |eth      |paper          |recyclable     |   0.40|   12.60|\n|900   |eth      |other          |non_recyclable |   0.58|   18.33|\n|899   |eth      |pet            |recyclable     |   0.08|    1.86|\n|899   |eth      |metal_alu      |recyclable     |   0.03|    0.72|\n|899   |eth      |glass          |recyclable     |   0.00|    0.00|\n|899   |eth      |paper          |recyclable     |   0.05|    1.26|\n|899   |eth      |other          |non_recyclable |   0.34|    8.16|\n|921   |old_town |pet            |recyclable     |   0.08|    1.81|\n|921   |old_town |metal_alu      |recyclable     |   0.03|    0.70|\n|921   |old_town |glass          |recyclable     |   0.30|    6.89|\n|921   |old_town |paper          |recyclable     |   0.40|    9.32|\n|921   |old_town |other          |non_recyclable |   1.52|   35.21|\n|916   |old_town |pet            |recyclable     |   0.11|    1.74|\n|916   |old_town |metal_alu      |recyclable     |   0.04|    0.70|\n|916   |old_town |glass          |recyclable     |   0.92|   14.63|\n|916   |old_town |paper          |recyclable     |   1.01|   16.20|\n|916   |old_town |other          |non_recyclable |   1.99|   31.73|\n:::\n:::\n\n## How to {auto-animate=\"true\" .smaller .scrollable}\n\n::: {.cell}\n\n```{.r .cell-code}\nwaste_data_untidy \n```\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n|objid |location |  pet| metal_alu| glass| paper| recyclable| non_recyclable| total|\n|:-----|:--------|----:|---------:|-----:|-----:|----------:|--------------:|-----:|\n|900   |eth      | 0.06|      0.06|  0.58|  0.21|       0.92|           1.14|  2.05|\n|899   |eth      | 0.14|      0.01|  0.18|  0.28|       0.61|           3.04|  3.64|\n|921   |old_town | 0.00|      0.00|  0.00|  0.41|       0.41|           1.57|  1.99|\n|916   |old_town | 0.17|      0.04|  0.80|  0.55|       1.56|           0.62|  2.19|\n|900   |eth      | 0.10|      0.04|  0.00|  0.40|       0.54|           0.58|  1.12|\n|899   |eth      | 0.08|      0.03|  0.00|  0.05|       0.16|           0.34|  0.50|\n|921   |old_town | 0.08|      0.03|  0.30|  0.40|       0.81|           1.52|  2.33|\n|916   |old_town | 0.11|      0.04|  0.92|  1.01|       2.08|           1.99|  4.07|\n:::\n:::\n\n## How to {auto-animate=\"true\" .smaller .scrollable}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\nwaste_data_untidy |> \n  select(objid:paper, non_recyclable) \n```\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n|objid |location |  pet| metal_alu| glass| paper| non_recyclable|\n|:-----|:--------|----:|---------:|-----:|-----:|--------------:|\n|900   |eth      | 0.06|      0.06|  0.58|  0.21|           1.14|\n|899   |eth      | 0.14|      0.01|  0.18|  0.28|           3.04|\n|921   |old_town | 0.00|      0.00|  0.00|  0.41|           1.57|\n|916   |old_town | 0.17|      0.04|  0.80|  0.55|           0.62|\n|900   |eth      | 0.10|      0.04|  0.00|  0.40|           0.58|\n|899   |eth      | 0.08|      0.03|  0.00|  0.05|           0.34|\n|921   |old_town | 0.08|      0.03|  0.30|  0.40|           1.52|\n|916   |old_town | 0.11|      0.04|  0.92|  1.01|           1.99|\n:::\n:::\n\n## How to {auto-animate=\"true\" .smaller .scrollable}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"3\"}\nwaste_data_untidy |> \n  select(objid:paper, non_recyclable) |> \n  rename(other = non_recyclable) \n```\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n|objid |location |  pet| metal_alu| glass| paper| other|\n|:-----|:--------|----:|---------:|-----:|-----:|-----:|\n|900   |eth      | 0.06|      0.06|  0.58|  0.21|  1.14|\n|899   |eth      | 0.14|      0.01|  0.18|  0.28|  3.04|\n|921   |old_town | 0.00|      0.00|  0.00|  0.41|  1.57|\n|916   |old_town | 0.17|      0.04|  0.80|  0.55|  0.62|\n|900   |eth      | 0.10|      0.04|  0.00|  0.40|  0.58|\n|899   |eth      | 0.08|      0.03|  0.00|  0.05|  0.34|\n|921   |old_town | 0.08|      0.03|  0.30|  0.40|  1.52|\n|916   |old_town | 0.11|      0.04|  0.92|  1.01|  1.99|\n:::\n:::\n\n## How to {auto-animate=\"true\" .smaller .scrollable}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"1|6-8|9-10\"}\nwaste_category_levels <- c(\"glass\", \"metal_alu\", \"paper\", \"pet\", \"other\")\n\nwaste_data_untidy |> \n  select(objid:paper, non_recyclable) |> \n  rename(other = non_recyclable) |> \n  pivot_longer(cols = pet:other,\n               names_to = \"waste_category\",\n               values_to = \"weight\") |> \n  mutate(waste_category = factor(waste_category, \n                                 levels = waste_category_levels)) \n```\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n|objid |location |waste_category | weight|\n|:-----|:--------|:--------------|------:|\n|900   |eth      |pet            |   0.06|\n|900   |eth      |metal_alu      |   0.06|\n|900   |eth      |glass          |   0.58|\n|900   |eth      |paper          |   0.21|\n|900   |eth      |other          |   1.14|\n|899   |eth      |pet            |   0.14|\n|899   |eth      |metal_alu      |   0.01|\n|899   |eth      |glass          |   0.18|\n|899   |eth      |paper          |   0.28|\n|899   |eth      |other          |   3.04|\n|921   |old_town |pet            |   0.00|\n|921   |old_town |metal_alu      |   0.00|\n|921   |old_town |glass          |   0.00|\n|921   |old_town |paper          |   0.41|\n|921   |old_town |other          |   1.57|\n|916   |old_town |pet            |   0.17|\n|916   |old_town |metal_alu      |   0.04|\n|916   |old_town |glass          |   0.80|\n|916   |old_town |paper          |   0.55|\n|916   |old_town |other          |   0.62|\n|900   |eth      |pet            |   0.10|\n|900   |eth      |metal_alu      |   0.04|\n|900   |eth      |glass          |   0.00|\n|900   |eth      |paper          |   0.40|\n|900   |eth      |other          |   0.58|\n|899   |eth      |pet            |   0.08|\n|899   |eth      |metal_alu      |   0.03|\n|899   |eth      |glass          |   0.00|\n|899   |eth      |paper          |   0.05|\n|899   |eth      |other          |   0.34|\n|921   |old_town |pet            |   0.08|\n|921   |old_town |metal_alu      |   0.03|\n|921   |old_town |glass          |   0.30|\n|921   |old_town |paper          |   0.40|\n|921   |old_town |other          |   1.52|\n|916   |old_town |pet            |   0.11|\n|916   |old_town |metal_alu      |   0.04|\n|916   |old_town |glass          |   0.92|\n|916   |old_town |paper          |   1.01|\n|916   |old_town |other          |   1.99|\n:::\n:::\n\n## How to {auto-animate=\"true\" .smaller .scrollable}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"11-13|14\"}\nwaste_category_levels <- c(\"glass\", \"metal_alu\", \"paper\", \"pet\", \"other\")\n\nwaste_data_untidy |> \n  select(objid:paper, non_recyclable) |> \n  rename(other = non_recyclable) |> \n  pivot_longer(cols = pet:other,\n               names_to = \"waste_category\",\n               values_to = \"weight\") |> \n  mutate(waste_category = factor(waste_category, \n                                 levels = waste_category_levels)) |>\n  mutate(type = case_when(\n    waste_category == \"other\" ~ \"non_recyclable\",\n    TRUE ~ \"recyclable\")) |> \n  relocate(type, .before = weight)\n```\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n|objid |location |waste_category |type           | weight|\n|:-----|:--------|:--------------|:--------------|------:|\n|900   |eth      |pet            |recyclable     |   0.06|\n|900   |eth      |metal_alu      |recyclable     |   0.06|\n|900   |eth      |glass          |recyclable     |   0.58|\n|900   |eth      |paper          |recyclable     |   0.21|\n|900   |eth      |other          |non_recyclable |   1.14|\n|899   |eth      |pet            |recyclable     |   0.14|\n|899   |eth      |metal_alu      |recyclable     |   0.01|\n|899   |eth      |glass          |recyclable     |   0.18|\n|899   |eth      |paper          |recyclable     |   0.28|\n|899   |eth      |other          |non_recyclable |   3.04|\n|921   |old_town |pet            |recyclable     |   0.00|\n|921   |old_town |metal_alu      |recyclable     |   0.00|\n|921   |old_town |glass          |recyclable     |   0.00|\n|921   |old_town |paper          |recyclable     |   0.41|\n|921   |old_town |other          |non_recyclable |   1.57|\n|916   |old_town |pet            |recyclable     |   0.17|\n|916   |old_town |metal_alu      |recyclable     |   0.04|\n|916   |old_town |glass          |recyclable     |   0.80|\n|916   |old_town |paper          |recyclable     |   0.55|\n|916   |old_town |other          |non_recyclable |   0.62|\n|900   |eth      |pet            |recyclable     |   0.10|\n|900   |eth      |metal_alu      |recyclable     |   0.04|\n|900   |eth      |glass          |recyclable     |   0.00|\n|900   |eth      |paper          |recyclable     |   0.40|\n|900   |eth      |other          |non_recyclable |   0.58|\n|899   |eth      |pet            |recyclable     |   0.08|\n|899   |eth      |metal_alu      |recyclable     |   0.03|\n|899   |eth      |glass          |recyclable     |   0.00|\n|899   |eth      |paper          |recyclable     |   0.05|\n|899   |eth      |other          |non_recyclable |   0.34|\n|921   |old_town |pet            |recyclable     |   0.08|\n|921   |old_town |metal_alu      |recyclable     |   0.03|\n|921   |old_town |glass          |recyclable     |   0.30|\n|921   |old_town |paper          |recyclable     |   0.40|\n|921   |old_town |other          |non_recyclable |   1.52|\n|916   |old_town |pet            |recyclable     |   0.11|\n|916   |old_town |metal_alu      |recyclable     |   0.04|\n|916   |old_town |glass          |recyclable     |   0.92|\n|916   |old_town |paper          |recyclable     |   1.01|\n|916   |old_town |other          |non_recyclable |   1.99|\n:::\n:::\n\n## How to {auto-animate=\"true\" .smaller .scrollable}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"15-16\"}\nwaste_category_levels <- c(\"glass\", \"metal_alu\", \"paper\", \"pet\", \"other\")\n\nwaste_data_untidy |> \n  select(objid:paper, non_recyclable) |> \n  rename(other = non_recyclable) |> \n  pivot_longer(cols = pet:other,\n               names_to = \"waste_category\",\n               values_to = \"weight\") |> \n  mutate(waste_category = factor(waste_category, \n                                 levels = waste_category_levels)) |> \n  mutate(type = case_when(\n    waste_category == \"other\" ~ \"non_recyclable\",\n    TRUE ~ \"recyclable\")) |> \n  relocate(type, .before = weight) |> \n  group_by(objid) |> \n  mutate(percent = weight / sum(weight) * 100)\n```\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n|objid |location |waste_category |type           | weight| percent|\n|:-----|:--------|:--------------|:--------------|------:|-------:|\n|900   |eth      |pet            |recyclable     |   0.06|    2.02|\n|900   |eth      |metal_alu      |recyclable     |   0.06|    1.95|\n|900   |eth      |glass          |recyclable     |   0.58|   18.14|\n|900   |eth      |paper          |recyclable     |   0.21|    6.74|\n|900   |eth      |other          |non_recyclable |   1.14|   35.78|\n|899   |eth      |pet            |recyclable     |   0.14|    3.33|\n|899   |eth      |metal_alu      |recyclable     |   0.01|    0.31|\n|899   |eth      |glass          |recyclable     |   0.18|    4.30|\n|899   |eth      |paper          |recyclable     |   0.28|    6.69|\n|899   |eth      |other          |non_recyclable |   3.04|   73.36|\n|921   |old_town |pet            |recyclable     |   0.00|    0.00|\n|921   |old_town |metal_alu      |recyclable     |   0.00|    0.00|\n|921   |old_town |glass          |recyclable     |   0.00|    0.00|\n|921   |old_town |paper          |recyclable     |   0.41|    9.60|\n|921   |old_town |other          |non_recyclable |   1.57|   36.46|\n|916   |old_town |pet            |recyclable     |   0.17|    2.76|\n|916   |old_town |metal_alu      |recyclable     |   0.04|    0.69|\n|916   |old_town |glass          |recyclable     |   0.80|   12.73|\n|916   |old_town |paper          |recyclable     |   0.55|    8.82|\n|916   |old_town |other          |non_recyclable |   0.62|    9.99|\n|900   |eth      |pet            |recyclable     |   0.10|    3.09|\n|900   |eth      |metal_alu      |recyclable     |   0.04|    1.35|\n|900   |eth      |glass          |recyclable     |   0.00|    0.00|\n|900   |eth      |paper          |recyclable     |   0.40|   12.60|\n|900   |eth      |other          |non_recyclable |   0.58|   18.33|\n|899   |eth      |pet            |recyclable     |   0.08|    1.86|\n|899   |eth      |metal_alu      |recyclable     |   0.03|    0.72|\n|899   |eth      |glass          |recyclable     |   0.00|    0.00|\n|899   |eth      |paper          |recyclable     |   0.05|    1.26|\n|899   |eth      |other          |non_recyclable |   0.34|    8.16|\n|921   |old_town |pet            |recyclable     |   0.08|    1.81|\n|921   |old_town |metal_alu      |recyclable     |   0.03|    0.70|\n|921   |old_town |glass          |recyclable     |   0.30|    6.89|\n|921   |old_town |paper          |recyclable     |   0.40|    9.32|\n|921   |old_town |other          |non_recyclable |   1.52|   35.21|\n|916   |old_town |pet            |recyclable     |   0.11|    1.74|\n|916   |old_town |metal_alu      |recyclable     |   0.04|    0.70|\n|916   |old_town |glass          |recyclable     |   0.92|   14.63|\n|916   |old_town |paper          |recyclable     |   1.01|   16.20|\n|916   |old_town |other          |non_recyclable |   1.99|   31.73|\n:::\n:::\n\n# Live Coding Exercise: Pivoting {background-color=\"#0F4C81\"}\n\n## live-04a-tidyr-pivoting\n\n1. Head over to rstudio.cloud\n2. Open the workspace for the course (cven5837-ss22)\n3. Open \"Projects\"\n4. Open the \"course-materials\" project\n5. Follow along with me\n\n# Homework week 4 {background-color=\"#0F4C81\"}\n\n## Homework due dates\n\n- All material on [course website](https://cven5837-ss22.github.io/website/weeks/wk-04.html)\n- Homework assignment due: Friday, 29th July\n- Learning reflection due: Monday, 1st August\n\n# Thanks! ðŸŒ»  {background-color=\"#0F4C81\"}\n\n## \n\nSlides created via revealjs and Quarto: https://quarto.org/docs/presentations/revealjs/ \nAccess slides as [PDF on GitHub](https://github.com/cven5837-ss22/website/raw/main/slides/lec-04-tidy-data.pdf)\n\nAll material is licensed under [Creative Commons Attribution Share Alike 4.0 International](https://creativecommons.org/licenses/by-sa/4.0/). \n\n",
    "supporting": [
      "lec-04-tidy-data_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/countdown-0.3.5/countdown.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/countdown-0.3.5/countdown.js\"></script>\n"
      ],
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    function fireSlideChanged(previousSlide, currentSlide) {\n\n      // dispatch for htmlwidgets\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for reveal\n    if (window.Reveal) {\n      window.Reveal.addEventListener(\"slidechanged\", function(event) {\n        fireSlideChanged(event.previousSlide, event.currentSlide);\n      });\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": null
  }
}